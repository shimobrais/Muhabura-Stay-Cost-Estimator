<?php include 'db.php'; ?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Muhabura Hotel â€“ Cost Estimator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<header>
  <div class="header-top">
    <div>
      <h1>Muhabura Hotel</h1>
      <p>Estimate your total stay costs (Cloud-Based System)</p>
    </div>
    <div class="auth-buttons">
      <button class="btn-login" onclick="openLoginModal()">Log In</button>
      <button class="btn-signup" onclick="openSignupModal()">Sign Up</button>
    </div>
  </div>
</header>

<main class="container">
  <section class="panel left">
    <h2>Choose Services</h2>

    <label>Check-in date <input type="date" id="checkIn" onchange="calculate()"></label>
    <label>Check-out date <input type="date" id="checkOut" onchange="calculate()"></label>

    <label>
      Room type
      <select id="roomType" onchange="calculate()">
        <option value="" disabled selected>Select a room</option>
        <?php
        $sql = "SELECT * FROM services WHERE category = 'Room'";
        $result = mysqli_query($conn, $sql);
        while($row = mysqli_fetch_assoc($result)) {
            echo "<option value='".$row['id']."' data-min='".$row['min_price']."' data-max='".$row['max_price']."'>".$row['service_name']."</option>";
        }
        ?>
      </select>
    </label>

    <h3>Additional Services</h3>
    <div class="services-grid">
      <?php
      $sql = "SELECT * FROM services WHERE category = 'Extra'";
      $result = mysqli_query($conn, $sql);
      while($row = mysqli_fetch_assoc($result)) {
          echo "
          <div class='service-card' onclick='toggleService(this)'>
            <input type='checkbox' class='service-checkbox' 
                   data-min='".$row['min_price']."' 
                   data-max='".$row['max_price']."' 
                   onchange='calculate()' style='display:none'>
            <h4>".$row['service_name']."</h4>
            <p>".number_format($row['min_price'])." - ".number_format($row['max_price'])." RWF</p>
          </div>";
      }
      ?>
    </div>
  </section>

  <section class="panel right">
    <h2>Estimation Summary</h2>
    <div class="result-box">
      <p>Total Nights: <span id="displayNights">0</span></p>
      <hr>
      <h3>Estimated Total Range:</h3>
      <div id="totalRange" style="font-size: 1.5rem; color: #1f3c88; font-weight: bold;">0 - 0 RWF</div>
      <button class="booking-btn" onclick="openBookingModal()" style="margin-top:20px;">Book Now</button>
    </div>
  </section>
</main>

<script src="script.js"></script>
</body>
</html>